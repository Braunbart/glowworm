<!DOCTYPE html>
<html>

<head>
	<meta charset="utf8">
	<title>three.js app</title>
	<style>
		body {
			margin: 0;
			position: relative;
		}

		#twodee {
			position: absolute;
			z-index: 10;
			width: 300px;
			height: 180px;
			background: #ffffff;
		}

		input[type=color] {
			width: 12.5%;
			height: 12.5%;
		}
	</style>
</head>

<body>
	<div id="twodee">

	</div>
	<script src="js/three.min.js"></script>
	<script src="js/OrbitControls.js"></script>
	<script src="js/mainloop.js"></script>
	<script>
		for (let i = 0; i < 8; i++) {
			for (let j = 0; j < 8; j++) {
				hexString1 = (Math.abs(j * 30 - i * 30)).toString(16);
				if (hexString1.length % 2) {
					hexString1 = '0' + hexString1;
				}
				twodee.innerHTML += `<input type='color' value='#${hexString1}${hexString1}${hexString1}'>`;
			}
		}


		var SCENE, CAMERA, RENDERER, CUBES;

		var init = function () {
			CUBES = [];
			SCENE = new THREE.Scene();
			CAMERA = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
			CAMERA.position.z = 10;

			RENDERER = new THREE.WebGLRenderer();
			RENDERER.setSize(window.innerWidth, window.innerHeight);
			document.body.appendChild(RENDERER.domElement);

			for (let i = -3; i < 5; i++) {
				var geometry = new THREE.IcosahedronGeometry(0.5, 1);
				var material = new THREE.MeshBasicMaterial({ color: 0xffffff });
				var cube = new THREE.Mesh(geometry, material);
				cube.position.x = Math.abs(i) * 2 - 3;
				cube.position.y = Math.sin(i) * 2;
				if (i == 3) {
					cube.position.x = 0;
					cube.position.y = 0;
					cube.position.z = -2;
				}
				if (i == 4) {
					cube.position.x = 0;
					cube.position.y = 0;
					cube.position.z = 2;
				}
				SCENE.add(cube);
				CUBES.push(cube);
			}

			var controls = new THREE.OrbitControls(CAMERA, RENDERER.domElement);
		}

		var update = function () {
			for (let i = 0; i < CUBES.length; i++) {
				let inputs = document.querySelectorAll('input[type=color]');
				let color = inputs[i * 8 + Math.floor(new Date().getMilliseconds() / 100) % 8].value;
				CUBES[i].material.color = new THREE.Color(`${color}`);
			}
		};

		var animate = function () {
			RENDERER.render(SCENE, CAMERA);
		}

		init();
		MainLoop.setUpdate(update).setDraw(animate).start();
	</script>
</body>

</html